<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="com.yedam.app.yedam_post.mapper.CommentMapper">
  
  
  <!-- 대댓글 조회 -->
  <select id="getComments" parameterType="int" resultType="Comment">
  		SELECT COMMENT_ID ,
               REPLY_ID ,
               COMMENT_WRITER ,
               COMMENT_CONTENT ,
               COMMENT_DATE  
        FROM comments
        WHERE reply_id IN (SELECT reply_id
                           FROM replies
                           WHERE post_id = #{postId}) 
  </select>
  
  <insert id="insertComment" parameterType="Comment" useGeneratedKeys="true" keyProperty="commentId">
  	INSERT INTO comments (comment_id
                        , reply_id
                        , comment_writer
                        , comment_content
                        , comment_date)
     VALUES (#{commentId}
           , #{replyId}
           , #{commentWriter}
           , #{commentContent}
           , sysdate);
  </insert>
  
  <delete id="deleteComment" parameterType="int">
  	DELETE 
  	FROM comments
  	WHERE = comment_id = #{commentId}
  </delete>
  
  </mapper>