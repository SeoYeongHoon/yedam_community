<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="com.yedam.app.yedam_post.mapper.ReplyMapper">
  
  <!-- 댓글 조회 -->
    <select id="getReplies" parameterType="int" resultType="Reply">
        SELECT reply_id,
               board_id,
               post_id,
               reply_content,
               reply_date,
               reply_writer,
               homework_target_id
        FROM replies
        WHERE post_id = #{postId}
    </select>
  
  
  
   <insert id="insertReply" parameterType="Reply" useGeneratedKeys="true" keyProperty="replyId">
        INSERT INTO replies (reply_id
                           , post_id
                           , parent_id
                           , user_id
                           , content
                           , create_date
                           , writer
                           , update_date)
        VALUES (#{replyId}
              , #{postId}
              , #{parentId}
              , #{userId}
              , #{content}
              , #{createDate}
              , #{writer}
              , #{updateDate})
    </insert>


    <delete id="deleteReply1" parameterType="int">
        DELETE 
        FROM replies 
        WHERE reply_id = #{replyId}
    </delete>
    
    <delete id="deleteReply2" parameterType="int">
        DELETE 
        FROM comments
        WHERE reply_id = #{replyId}
    </delete>

   
  </mapper>