<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{common/layouts/default_layout}"
      layout:fragment="Home">
<head>
  <title>게시글 작성</title>
  <style>
    .insert-title {
        margin-top: 40px;
    }
    h1 {
        text-align: center;
        margin-bottom: 20px;
        font-size: 2em;
    }
    label {
        display: block;
        margin-bottom: 10px;
        font-weight: bold;
        font-size: 1.1em;
    }
    input[type="text"], textarea {
        width: 100%;
        padding: 10px;
        margin-bottom: 20px;
        border: 1px solid #ccc;
        border-radius: 5px;
        font-size: 1em;
    }
    input[type="file"] {
        margin-bottom: 20px;
        font-size: 1em;
    }
    .submit-button {
        width: 100%;
        padding: 10px;
        background-color: #4CAF50;
        color: white;
        border: none;
        border-radius: 5px;
        font-size: 1.1em;
        cursor: pointer;
        transition: background-color 0.3s;
        margin-bottom: 10px;
    }
    .submit-button:hover {
        background-color: #357A38;
    }
  </style>
</head>
<body>
<div class="container">
  <h1 class="insert-title">게시글 작성</h1>
  <form th:action="@{/all/coursePostInsert}" th:each="post : ${post}" method="post" enctype="multipart/form-data" id="post-form">
    <label for="title">제목:</label>
    <input type="text" id="title" th:value="${post.title}" th:name="title"/><br />
    
    <!-- 어드민 계정일 시, 과정 선택하여 게시글 작성 가능 -->
    <th:block th:if="${#authentication.principal.userType == 'ROLE_ADMIN'}">
	 	<div class="select-style-1" style="display: flex; position: relative; margin-top: 20px; margin-bottom: 10px; margin-left: -10px;">
		 	<div class="select-position" style="min-width: 140px;">
			 	<select th:name="curriculumSelect" id="selectCurriculum" style="padding: 10px; color: black; background-color: white;">
					<option>====== 과정을 선택하세요. ======</option>
					<th:block th:each="class : ${class}">
						<option th:value="${class.curriculumId}" 
								th:name="${class.curriculumId}" 
								th:text="${class.curriculumName + ' (' +class.curriculumStartDate + ' ~ ' + class.curriculumEndDate + ')'}">
						</option>
					</th:block>
				</select>
			</div>
		</div>
	</th:block>
    
    <!-- 수료생 계정일 시, 본인 과정에만 게시글 작성 가능 -->
    <th:block th:if="${#authentication.principal.userType == 'ROLE_GRAD'}">
    	<input th:name="curriculumSelect" type="hidden" th:value="${#authentication.principal.getUserCurriculumId}">
	</th:block>
    
    <label for="postContent">내용:</label>
    <textarea id="postContent" name="postContent" th:name="postContent" th:value="${post.postContent}"></textarea><br />
    
    <label for="writer">작성자:</label>
    <input type="text" id="writer" name="writer" th:value="${post.writer}" readonly disabled/><br />
    
    <label for="file">파일:</label>
    <input type="file" name="file" multiple="multiple"/><br />
    
    <input type="hidden" th:value="${post.boardId}" th:name="boardId"/>
    <input type="hidden" th:value="${post.boardType}" th:name="boardType"/>
    <input type="hidden" name="userId" th:value="${post.userId}"/>
    <button class="submit-button" type="submit">등록</button>
  </form>
</div>
<script>
</script>
</body>
</html>
