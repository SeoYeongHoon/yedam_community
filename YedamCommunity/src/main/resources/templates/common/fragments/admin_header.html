<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:fragment="AdminHeaderFragment">
	<aside class="sidebar-nav-wrapper" style="position:fixed;">
      <div class="navbar-logo">
        <a href="/admin/adminMain">
          <img src="../images/yedam_logo.png" alt="logo" style="width: 250px; margin: -50px -30px;" />
        </a>
      </div>
      <nav class="sidebar-nav" style="margin-left: 0; width: 250px;">
        <ul>
           <th:block sec:authorize="hasAuthority('ROLE_ADMIN')">
	       		<li class="nav-item nav-item-has-children">
		            <a
		              data-bs-toggle="collapse"
		              data-bs-target="#ddmenu_1"
		              aria-controls="ddmenu_1"
		              aria-expanded="false"
		              aria-label="Toggle navigation"
		            >
		              <span class="icon">
		                <svg fill="#000000" width="20" height="20" viewBox="0 0 24 24" id="dashboard-alt" data-name="Flat Line" xmlns="http://www.w3.org/2000/svg" class="icon flat-line">
							<path id="secondary" d="M3,9H21a0,0,0,0,1,0,0V20a1,1,0,0,1-1,1H4a1,1,0,0,1-1-1V9A0,0,0,0,1,3,9Z" style="fill: rgb(44, 169, 188); stroke-width: 2;"></path>
							<path id="primary" d="M3,9H21M15,9V20m6,0V4a1,1,0,0,0-1-1H4A1,1,0,0,0,3,4V20a1,1,0,0,0,1,1H20A1,1,0,0,0,21,20Z" style="fill: none; stroke: rgb(0, 0, 0); stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></path>
						</svg>
		              </span>
		              <span class="text" style="margin-left: -12px;">관리자페이지</span>
		            </a>
		            <ul id="ddmenu_1" class="collapse show dropdown-nav">
			            <li>
			              <a href="/admin/adminMain" class="active"> 회원 관리 </a>
			            </li>
			            <li>
			              <a href="/admin/course"> 수강과정 관리 </a>
			            </li>
			            <li>
			              <a href="/admin/manageReport"> 신고글 관리 </a>
			            </li>
		            </ul>
	       		</li>
	       </th:block>
	       
           <li class="nav-item nav-item-has-children">
	            <a
	              data-bs-toggle="collapse"
	              data-bs-target="#ddmenu_2"
	              aria-controls="ddmenu_2"
	              aria-expanded="false"
	              aria-label="Toggle navigation"
	            >
	              
	              <span class="icon">
	                <svg width="20" height="20" viewBox="0 0 1024 1024" class="icon"  version="1.1" xmlns="http://www.w3.org/2000/svg">
					    <path d="M981.3 170.7H320c-23.6 0-42.7-19.1-42.7-42.7s19.1-42.7 42.7-42.7h661.3c23.6 0 42.7 19.1 42.7 42.7s-19.1 42.7-42.7 42.7zM981.3 938.7H320c-23.6 0-42.7-19.1-42.7-42.7s19.1-42.7 42.7-42.7h661.3c23.6 0 42.7 19.1 42.7 42.7s-19.1 42.7-42.7 42.7zM981.3 554.7H320c-23.6 0-42.7-19.1-42.7-42.7s19.1-42.7 42.7-42.7h661.3c23.6 0 42.7 19.1 42.7 42.7s-19.1 42.7-42.7 42.7z" fill="#3688FF" /><path d="M106.7 128m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="#5F6379" />
					    <path d="M106.7 512m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="#5F6379" />
					    <path d="M106.7 896m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="#5F6379" />
					</svg>
	              </span>
	              <span class="text" style="margin-left: -12px;">서비스 페이지</span>
	            </a>
	            <ul id="ddmenu_2" class="collapse show dropdown-nav">
	              <li>
	                <a href="/home"> 홈페이지 </a>
	              </li>
	              <li>
	                <a href="settings.html"> 수료 과정별 게시판 </a>
	              </li>
	              <li>
	                <a href="settings.html"> 구인/구직 게시판 </a>
	              </li>
	              <li>
	                <a href="settings.html"> 정보 공유 게시판 </a>
	              </li>
	              <li>
	                <a href="settings.html"> 질문과 토론 게시판 </a>
	              </li>
	            </ul>
           </li>
          
           <li class="nav-item nav-item-has-children">
	            <a
	              data-bs-toggle="collapse"
	              data-bs-target="#ddmenu_4"
	              aria-controls="ddmenu_4"
	              aria-expanded="false"
	              aria-label="Toggle navigation"
	            >
	              <span class="icon">
					<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1"  viewBox="0 0 455 455" xml:space="preserve" width="20" height="20">
					<g>
						<path style="fill:#FFFFFF;" d="M256.233,13.25c-11.996,0-22.557,6.129-28.733,15.423c-6.177-9.294-16.737-15.423-28.733-15.423H30   v321.535h168.767c11.99,0,22.555,6.122,28.733,15.409c6.177-9.289,16.742-15.409,28.733-15.409H425V13.25H256.233z"/>
						<path style="fill:#C1E8E6;" d="M227.5,350.193v30c-6.18-9.29-16.74-15.41-28.73-15.41H30v-30h168.77   C210.76,334.783,221.32,340.903,227.5,350.193z"/>
						<path style="fill:#C1E8E6;" d="M425,334.783v30H256.23c-11.99,0-22.55,6.12-28.73,15.41v-30c6.18-9.29,16.74-15.41,28.73-15.41H425   z"/>
						<path style="fill:#98D9D5;" d="M425,73.253v291.53H256.23c-11.99,0-22.55,6.12-28.73,15.41c-6.18-9.29-16.74-15.41-28.73-15.41H30   V73.253H0v321.53h198.77c2.17,0,3.35,1.42,3.75,2.03l8.91,10.38h32.15l8.9-10.39c0.4-0.6,1.58-2.02,3.75-2.02H455V73.253H425z"/>
						<path style="fill:#98D9D5;" d="M425,73.254l-197.5,20l-197.5-20H0v321.53h198.77c2.17,0,3.35,1.42,3.75,2.03l8.91,10.38h32.15   l8.9-10.39c0.4-0.6,1.58-2.02,3.75-2.02H455V73.254H425z"/>
						<path style="fill:#C1E8E6;" d="M30,334.784v30h168.77c11.99,0,22.55,6.12,28.73,15.41l10-70L30,334.784z"/>
						<path style="fill:#6DA8D6;" d="M227.5,310.195v70c6.18-9.29,16.74-15.41,28.73-15.41H425v-30L227.5,310.195z"/>
						<rect x="341.25" y="43.254" style="fill:#F2EBD9;" width="53.75" height="55.76"/>
						<rect x="257.5" y="43.254" style="fill:#F2EBD9;" width="53.75" height="55.76"/>
						<rect x="341.25" y="189.014" style="fill:#F2EBD9;" width="53.75" height="55.77"/>
						<rect x="257.5" y="189.014" style="fill:#F2EBD9;" width="53.75" height="55.77"/>
						<rect x="143.75" y="189.014" style="fill:#F2EBD9;" width="53.75" height="55.77"/>
						<rect x="60" y="189.014" style="fill:#F2EBD9;" width="53.75" height="55.77"/>
						<rect x="143.75" y="43.254" style="fill:#F2EBD9;" width="53.75" height="55.76"/>
						<rect x="60" y="43.254" style="fill:#F2EBD9;" width="53.75" height="55.76"/>
						<path style="fill:#F2EBD9;" d="M198.767,13.252H30v321.535h168.767c11.99,0,22.555,6.122,28.733,15.409l20-160.76l-20-160.76   C221.323,19.381,210.763,13.252,198.767,13.252z"/>
						<path style="fill:#FFFFFF;" d="M256.233,13.252c-11.996,0-22.557,6.129-28.733,15.423v321.52   c6.177-9.289,16.742-15.409,28.733-15.409H425V13.252H256.233z"/>
						<path style="fill:#6DA8D6;" d="M184.965,287.285h-12.5V261.39c0-4.142-3.357-7.5-7.5-7.5s-7.5,3.358-7.5,7.5v25.895H140.81V231.39   c0-4.142-3.357-7.5-7.5-7.5s-7.5,3.358-7.5,7.5v55.895h-16.654V261.39c0-4.142-3.357-7.5-7.5-7.5s-7.5,3.358-7.5,7.5v25.895H77.5   V231.39c0-4.142-3.357-7.5-7.5-7.5s-7.5,3.358-7.5,7.5v63.395c0,4.142,3.357,7.5,7.5,7.5h114.965c4.143,0,7.5-3.358,7.5-7.5   S189.107,287.285,184.965,287.285z"/>
						<path style="fill:#6DA8D6;" d="M70,60.75h114.965c4.143,0,7.5-3.358,7.5-7.5s-3.357-7.5-7.5-7.5H70c-4.143,0-7.5,3.358-7.5,7.5   S65.857,60.75,70,60.75z"/>
						<path style="fill:#6DA8D6;" d="M184.965,81.378H70c-4.143,0-7.5,3.358-7.5,7.5s3.357,7.5,7.5,7.5h114.965   c4.143,0,7.5-3.358,7.5-7.5S189.107,81.378,184.965,81.378z"/>
						<path style="fill:#6DA8D6;" d="M70,132.006h57.482c4.143,0,7.5-3.358,7.5-7.5s-3.357-7.5-7.5-7.5H70c-4.143,0-7.5,3.358-7.5,7.5   S65.857,132.006,70,132.006z"/>
						<path style="fill:#6DA8D6;" d="M184.965,152.634H70c-4.143,0-7.5,3.358-7.5,7.5s3.357,7.5,7.5,7.5h114.965   c4.143,0,7.5-3.358,7.5-7.5S189.107,152.634,184.965,152.634z"/>
						<path style="fill:#6DA8D6;" d="M184.965,188.262H70c-4.143,0-7.5,3.358-7.5,7.5s3.357,7.5,7.5,7.5h114.965   c4.143,0,7.5-3.358,7.5-7.5S189.107,188.262,184.965,188.262z"/>
						<path style="fill:#F2484B;" d="M306.25,429.75v-21l20-10l20,10v21c0,6.6-5.396,12-11.996,12h-16   C311.654,441.75,306.25,436.35,306.25,429.75z"/>
						<polygon style="fill:#C1E8E6;" points="306.25,378.75 326.25,368.75 346.25,378.75 346.25,408.75 306.25,408.75  "/>
						<polygon style="fill:#F2EBD9;" points="326.25,63.25 346.25,111.25 326.25,121.25 306.25,111.25  "/>
						<rect x="306.25" y="111.25" style="fill:#FFCC75;" width="40" height="267.5"/>
					</g>
	              </span>
	              <span class="text">과제 </span>
	            </a>
	            <ul id="ddmenu_4" class="collapse show dropdown-nav">
	            	<th:block sec:authorize="hasAuthority('ROLE_ADMIN')">
		              <li>
		                <a href="/admin/homework_T"> 과제 목록</a>
		              </li>
		            </th:block>
		            <th:block sec:authorize="hasAuthority('ROLE_LEARN')">
		              <li>
		                <a href="/all/homework_S"> 과제 목록</a>
		              </li>
		            </th:block>
	            </ul>
           </li>
          
           <li class="nav-item nav-item-has-children">
	            <a
	              data-bs-toggle="collapse"
	              data-bs-target="#ddmenu_4"
	              aria-controls="ddmenu_4"
	              aria-expanded="false"
	              aria-label="Toggle navigation"
	            >
	              <span class="icon">
	                <svg height="20" width="20" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
						 viewBox="0 0 392.575 392.575" xml:space="preserve">
					<path style="fill:#FFFFFF;" d="M237.576,330.72h-38.529c-6.012,0-10.925-4.848-10.925-10.925V281.33
						c0-2.844,1.164-5.624,3.168-7.758l75.636-75.636V32.829c0-6.012-4.848-10.925-10.925-10.925H84.558v51.782
						c0,6.012-4.848,10.925-10.925,10.925H21.851v275.265c0,6.012,4.848,10.925,10.925,10.925h223.418
						c6.012,0,10.925-4.848,10.925-10.925V305.96l-21.721,21.592C243.329,329.556,240.549,330.72,237.576,330.72z"/>
					<path style="fill:#56ACE0;" d="M73.568,84.611H44.671l-2.715,252.315c-0.065,6.012,4.784,10.99,10.731,11.055l179.782,2.004
						c6.012,0.065,10.99-4.784,11.055-10.731l0.065-10.279c-1.745,1.228-3.943,1.875-6.077,1.875h-38.529
						c-6.012,0-10.925-4.848-10.925-10.925v-38.529c0-2.844,1.164-5.624,3.168-7.758l53.527-53.527l1.875-164.267
						c0.065-6.012-4.784-10.99-10.731-11.055L84.364,43.237V73.75C84.558,79.698,79.58,84.611,73.568,84.611z"/>
					<g>
						<path style="fill:#194F82;" d="M211.846,83.641h-90.634c-6.012,0-10.925-4.848-10.925-10.925c0-6.012,4.848-10.925,10.925-10.925
							h90.634c6.012,0,10.925,4.848,10.925,10.925C222.772,78.793,217.923,83.641,211.846,83.641z"/>
						<path style="fill:#194F82;" d="M211.846,145.379H76.929c-6.012,0-10.925-4.848-10.925-10.925s4.848-10.925,10.925-10.925h134.982
							c6.012,0,10.925,4.848,10.925,10.925C222.772,140.53,217.923,145.379,211.846,145.379z"/>
						<path style="fill:#194F82;" d="M211.846,207.116H76.929c-6.012,0-10.925-4.848-10.925-10.925c0-6.077,4.848-10.925,10.925-10.925
							h134.982c6.012,0,10.925,4.848,10.925,10.925C222.836,202.267,217.923,207.116,211.846,207.116z"/>
						<path style="fill:#194F82;" d="M152.76,268.983h-75.83c-6.012,0-10.925-4.848-10.925-10.925c0-6.012,4.848-10.925,10.925-10.925
							h75.83c6.012,0,10.925,4.848,10.925,10.925C163.685,264.134,158.772,268.983,152.76,268.983z"/>
						<path style="fill:#194F82;" d="M152.76,330.72h-75.83c-6.012,0-10.925-4.848-10.925-10.925s4.848-10.925,10.925-10.925h75.83
							c6.012,0,10.925,4.848,10.925,10.925S158.772,330.72,152.76,330.72z"/>
						<path style="fill:#194F82;" d="M384.453,149.968l-15.451-15.451c-11.895-10.731-26.958-10.667-38.529,0L288.84,176.15V32.829
							c0-18.036-14.675-32.711-32.711-32.711H82.683c-8.727,0-17.002,3.426-23.208,9.568L9.568,59.593C3.362,65.799,0,73.944,0,82.671
							v277.075c0,18.036,14.675,32.711,32.711,32.711h223.418c18.036,0,32.711-14.675,32.711-32.711V284.11l95.612-95.612
							C395.572,176.991,394.99,160.183,384.453,149.968z M62.642,37.354V62.76H37.236L62.642,37.354z M267.055,359.811
							c0,6.012-4.848,10.925-10.925,10.925H32.711c-6.012,0-10.925-4.848-10.925-10.925v-275.2h51.782
							c6.012,0,10.925-4.848,10.925-10.925V21.904h171.636c6.012,0,10.925,4.848,10.925,10.925v165.107l-75.572,75.636
							c-2.004,2.004-3.168,4.784-3.168,7.758v38.529c0,6.012,4.848,10.925,10.925,10.925h38.529c2.844,0,5.624-1.164,7.758-3.168
							l21.657-21.657L267.055,359.811L267.055,359.811z M233.115,308.934h-23.079v-23.079l106.408-106.473l23.079,23.079L233.115,308.934
							z M369.002,173.047l-13.964,13.964l-23.079-23.079l13.964-13.964c2.78-2.263,5.301-2.004,7.758,0l15.386,15.386
							C371.006,166.776,371.394,171.108,369.002,173.047z"/>
					</g>
					<g>
						<polygon style="fill:#FFC10D;" points="62.642,37.354 37.236,62.76 62.642,62.76 	"/>
						<polygon style="fill:#FFC10D;" points="210.036,285.791 210.036,308.934 233.115,308.934 339.588,202.526 316.444,179.383 	"/>
					</g>
					<path style="fill:#FFFFFF;" d="M353.616,149.968c-2.392-2.004-4.978-2.263-7.758,0l-13.964,13.964l23.079,23.079l13.964-13.964
						c2.392-1.939,2.004-6.271,0-7.758L353.616,149.968z"/>
					</svg>
	              </span>
	              <span class="text">시험 </span>
	            </a>
	            <ul id="ddmenu_4" class="collapse show dropdown-nav">
	            <th:block sec:authorize="hasAuthority('ROLE_ADMIN')">
	              <li>
	                <a href="/teachermain"> HOME </a>
	              </li>
	              <li>
	                <a href="/testlist"> 시험목록 </a>
	              </li>
	              <li>
	                <a href="/quizlist"> 문제목록 </a>
	              </li>
	            </th:block>
	            <th:block sec:authorize="hasAuthority('ROLE_LEARN')">
	              <li>
	                <a href="/myPage"> HOME </a>
	              </li>
	              <li>
	                <a href="/testList2?page=1"> 시험목록 </a>
	              </li>
	              <li>
	                <a href="#"> 과제목록 </a>
	              </li>
	            </th:block>
	            </ul>
           </li>
        </ul>
      </nav>
    </aside>
    <script>
    	window.onload = function() {
    		setActiveMenuItem();
    	}
    	
	 	// 현재 페이지 URL
	    function getCurrentPage() {
	        var pathArray = window.location.pathname.split('/');
	        console.log(pathArray);
	        return pathArray[pathArray.length - 1];
	    }
	
	    // 현재 페이지에 해당하는 메뉴에 active 추가
	    function setActiveMenuItem() {
	        var currentPage = getCurrentPage();
	        var navLinks = document.querySelectorAll('.sidebar-nav ul li a');
	        console.log("현재 페이지: ", currentPage);
			console.log("네비게이션", navLinks);
	        
	        for (var i = 0; i < navLinks.length; i++) {
            	
	            if (navLinks[i].getAttribute('href') === ("/admin/" + currentPage)) {
	                navLinks[i].classList.add('active');
	            } else {
	            	navLinks[i].classList.remove('active');
	            }
	        }
	    }
		
		
		
		//--------------------------------------------
		// 필터링으로 인한 페이징 넘버링 업데이트
		//--------------------------------------------
		function updatePagination(pageDTO, currentPage) {
			console.log("pageDTO:", JSON.stringify(pageDTO, null, 5), "현재페이지:", currentPage);
			let arr = new Array();
			arr.push(pageDTO);
			console.log("현재 페이지: " + arr[0].page);
			currentPage = arr[0].page;
			
		    var pagination = $('.adminPaging');
		    pagination.empty();
			
		    if (pageDTO.prev) {
				pagination.append('<a href="javascript:void(0)" data-page="' + (pageDTO.starPage - 1) + '" onclick="filterUsers(' + (pageDTO.starPage - 1) + ')">&laquo;</a>');
		    }
			
		    for (var p = pageDTO.starPage; p <= pageDTO.endPage; p++) {
				console.log("p값: " + p);
				
				var pageLink = $('<a href="javascript:void(0)" data-page="' + p + '">' + p + '</a>');
				
		        if (p === currentPage) {
		            pageLink.addClass('active');
		        } else {
		            pageLink.addClass('none');
		        }
				
		        pageLink.attr('onclick', 'filterUsers(' + p + ')');
		        pagination.append(pageLink);
		    }
		    if (pageDTO.next) {
		        pagination.append('<a href="javascript:void(0)" data-page="' + (pageDTO.endPage + 1) + '" onclick="filterUsers(' + (pageDTO.endPage + 1) + ')">&raquo;</a>');
		    }
		}

		$(document).ready(function() {
		    $('#userFilter').off('change').on('change', function() {
		        filterUsers(1); // 필터 변경 시 1페이지부터 다시 시작
		    });

		    $('#searchInput').off('keyup').on('keyup', function(e) {
		    	filterUsers(1); // 검색어 입력하거나 지울 시 실시간으로 데이터 변경후 페이지 1로 고정
		    });
		    
		    $('.adminPaging').off('click', 'a').on('click', 'a', function() {
		        var page = $(this).data('page');
		        filterUsers(page);
		    });

		});
		
		
    </script>
</html>