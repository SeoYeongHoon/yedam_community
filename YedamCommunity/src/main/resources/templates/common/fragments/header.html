<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:fragment="HeaderFragment">
<style>
</style>
<div class="container-menu-desktop">

	<div class="wrap-main-nav" style="height: 100%">
		<div class="main-nav" style="height: 100%">
			<!-- Menu desktop -->
			<nav class="menu-desktop" style="height: 100%; display: flex; align-items: center; position: relative;">
				<ul class="main-menu">
					<div class="" style="margin-right: 20px;">
						<a href="/home"><img src="/images/logo_main.png" alt="LOGO"></a>
					</div>
					<li class="main-menu-active"><a href="/home">Home</a>
					<th:block sec:authorize="hasAuthority('ROLE_LEARN') or hasAuthority('ROLE_ADMIN')">
						<li class="mega-menu-item"><a href="teachermain">LMS</a></li>
					</th:block>
					<li class="mega-menu-item"><a th:href="@{/post/1}">수료 과정별 게시판</a></li>
					<li class="mega-menu-item"><a th:href="@{/post/2}">구인/구직 게시판</a></li>
					<li class="mega-menu-item"><a th:href="@{/post/3}">정보 공유 게시판</a></li>
					<li class="mega-menu-item"><a th:href="@{/post/4}">질문과 토론 게시판</a></li>
				</ul>
				<th:block sec:authorize="hasAuthority('ROLE_LEARN') or hasAuthority('ROLE_GRAD') or hasAuthority('ROLE_ADMIN')">
					<div class="profile_my_info" style="position: absolute; right: 90px;">
					
						<p style="font-weight: bold">[[${#authentication.name}]] 님</p>
						<p>환영합니다!</p>
					</div>
				</th:block>
				<div class="profile_image_btn">
					<button id="myMenuBtn"><img th:src="@{${'/images/profile/' + #authentication.principal.profileImageLocation}}" 
						style="width: 65px; height: 65px; border-radius: 50%; border: 1px solid #9AA4CA; box-shadow: 1px 5px 8px 0 #00000040;"></button>
					<ul class="myMenuList" style="display: none">
						<th:block sec:authorize="hasAuthority('ROLE_LEARN') or hasAuthority('ROLE_GRAD')">
							<li class="myMenuItem"><a href="/mypage">프로필</a></li>
						</th:block>
						<th:block sec:authorize="hasAuthority('ROLE_ADMIN')">
							<li class="myMenuItem"><a href="/admin/adminMain">관리자페이지</a></li>
						</th:block>
						<li class="myMenuItem"><a href="/logout">로그아웃</a></li>
					</ul>
				</div>
			</nav>
		</div>
	</div>
</div>
<script>
	var menuList = document.querySelector('.myMenuList');
	var menuButton = document.querySelector('#myMenuBtn');
	
	menuButton.addEventListener('click', function(e) {
	    e.stopPropagation();
	    if (menuList.style.display === 'block') {
	        menuList.style.display = 'none';
	    } else {
	        menuList.style.display = 'block';
	    }
	});
	
	// 메뉴 외부 클릭 시 메뉴 닫기
	document.addEventListener('click', function(e) {
	    if (!menuButton.contains(e.target) && !menuList.contains(e.target)) {
	        menuList.style.display = 'none';
	    }
	});

</script>
</html>